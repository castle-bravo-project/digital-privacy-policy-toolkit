
# Digital Privacy Policy Analysis Toolkit

[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![TailwindCSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)](https://tailwindcss.com/)
[![Gemini API](https://img.shields.io/badge/Gemini_API-4285F4?style=for-the-badge&logo=google&logoColor=white)](https://ai.google.dev/)

An interactive, AI-powered toolkit for analyzing, simulating, and drafting digital privacy policy, legislation, and technical concepts. This dashboard provides policymakers, journalists, and advocates with powerful tools to understand the complex interplay between technology and civil liberties.

## Features

The toolkit is organized into three main categories, offering a wide range of capabilities from illustrative simulations to practical analysis and drafting assistance.

### üé≠ Simulations

*   **CSS Simulator**: Visually demonstrates the dangers of Client-Side Scanning mandates by simulating a "false positive" on a private photo and its automatic reporting to a government server.
*   **AI Bias Simulator**: Puts you in the role of deploying an AI for parole decisions, showing how skewed real-world data leads to discriminatory outcomes.
*   **Backdoor Simulator**: An interactive narrative demonstrating how encryption backdoors can be exploited, making abstract crypto concepts tangible.
*   **Surveillance Simulator**: Simulates a facial recognition search against a citizen database to illustrate the power and perils of this technology.
*   **Age Exploit Simulator**: Demonstrates common vulnerabilities in various age verification systems, from simple age gates to ID scans.

### ‚úçÔ∏è Analysis & Drafting

*   **Legislative Drafter**: Acts as an expert AI counsel, asking critical questions to guide you toward technically sound and constitutionally robust policy language.
*   **Policy Grader**: Provides an instant "nutrition label" for privacy policies, generating a simple A-F grade and a detailed report card.
*   **Analysis & Reports**: Transforms raw legislative text into a structured, audience-appropriate report covering technical, security, and constitutional implications.
*   **Bill Analyzer**: Provides a high-level AI analysis of any legislative text, identifying technical claims, feasibility issues, and constitutional concerns.
*   **Tech Translator**: Converts complex technical and legal jargon into clear, simple language suitable for various audiences.

### üìö Reference

*   **Policy Dossier**: A static reference page detailing the technical and constitutional flaws in common anti-privacy proposals like encryption backdoors and mandatory age verification.
*   **Policy Mythbuster**: Select a common anti-privacy myth and receive a forceful, evidence-based rebuttal generated by AI.
*   **GDPR vs. US Simulator**: Compares how different data privacy frameworks (the EU's GDPR vs. a US model) handle real-world scenarios.
*   **Breach Timeline**: Generates a list of significant historical government data breaches to provide context for government cybersecurity capabilities.

## üõ†Ô∏è Technology Stack

*   **Frontend**: [React](https://reactjs.org/) with [TypeScript](https://www.typescriptlang.org/)
*   **Styling**: [Tailwind CSS](https://tailwindcss.com/)
*   **AI/LLM**: [Google Gemini API](https://ai.google.dev/) (`gemini-2.5-flash`)
*   **Bundling/Imports**: Handled by esm.sh via import maps (no local bundler needed).

## üöÄ Getting Started

### Prerequisites

*   A modern web browser that supports ES Modules and Import Maps (Chrome, Firefox, Edge, Safari).
*   A Google Gemini API key.

### API Key Configuration

This application requires a Google Gemini API key to function. The key must be provided as an environment variable.

1.  Obtain an API key from [Google AI Studio](https://aistudio.google.com/app/apikey).
2.  You must configure your hosting environment or local development setup to expose this key as `process.env.API_KEY`. The application code reads this variable directly.

**Note:** The application is designed to **never** ask for the API key in the UI. Its availability in the environment is a hard requirement.

### Usage

As this is a client-side application with no build step, you can run it by serving the files with any simple static file server.

1.  Clone the repository:
    ```bash
    git clone https://github.com/castle-bravo-project/digital-privacy-toolkit.git
    cd digital-privacy-toolkit
    ```
2.  There is no `npm install` or build step required. The application uses import maps to load dependencies directly from a CDN (esm.sh).
3.  Serve the project root directory using a local web server. A simple one can be run with Python:
    ```bash
    # For Python 3
    python -m http.server
    ```
4.  Open your browser and navigate to `http://localhost:8000`. The application should load.

## üí° Simulated vs. Genuine AI Processing

This toolkit uses a mix of hardcoded simulation logic and genuine, real-time AI processing to achieve its educational goals. It's important to understand the distinction:

| Tool                        | Simulation Logic                                                              | Genuine AI Processing (Live Gemini Call)                                     |
| --------------------------- | ----------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |
| **CSS Simulator**           | The "false positive" event is hardcoded on a specific image.                  | **Yes:** Generates the expert analysis of the privacy failure.               |
| **AI Bias Simulator**       | AI "verdicts" are hardcoded based on the dataset choice (`skewed`/`balanced`).  | **Yes:** Generates the expert analysis of bias and feedback loops.           |
| **Backdoor Simulator**      | N/A                                                                           | **Yes:** Generates the entire interactive narrative and user choices.        |
| **Surveillance Simulator**  | The facial recognition "match" is hardcoded in the data.                      | **Yes:** Generates the expert analysis of the surveillance implications.     |
| **Age Exploit Simulator**   | Exploit paths are predefined.                                                 | **Yes:** Generates the security and privacy analysis for the chosen exploit. |
| **All Other Tools**         | N/A                                                                           | **Yes:** All analysis, translation, and generation are performed by Gemini.  |

In short, the "Simulations" use hardcoded triggers to create a specific scenario, and then use the Gemini API to provide a dynamic, expert analysis of that scenario's consequences. All tools in "Analysis & Drafting" and "Reference" rely entirely on genuine AI processing for their core functionality.

## üß† API Management & Prompt Engineering

All interactions with the Google Gemini API are centralized in `services/geminiService.ts`. Our prompt engineering strategy focuses on three key principles: Role-Playing, Structured Output, and Context-Injection.

### Role-Playing

We assign a persona to the AI to guide its tone, knowledge base, and response style. This creates more authoritative and contextually appropriate output.

*Example from `getDraftingAdvice`*:
```
You are an expert legislative counsel specializing in technology and constitutional law. Your role is to act as a Socratic guide... Do not just write the law for them. Instead, ask critical questions...
```

### Structured Output (JSON Schema)

For tools that require predictable, parsable data, we leverage Gemini's JSON mode. We provide a strict schema that the model must follow, ensuring reliable integration with our React components.

*Example from `gradePrivacyPolicy`*:
```typescript
const schema = {
    type: Type.OBJECT,
    properties: {
        overallGrade: {
            type: Type.STRING,
            description: "The final letter grade... must be one of: 'A', 'B', 'C', 'D', 'F'."
        },
        gradeReasoning: { type: Type.STRING, /* ... */ },
        sections: {
            type: Type.ARRAY,
            items: { /* ... section schema ... */ }
        }
    },
    required: ["overallGrade", "gradeReasoning", "sections"]
};

// This function wraps the API call
return generateWithSchema<PrivacyPolicyGrade>(prompt, schema);
```

### Context-Injection

Prompts are dynamically constructed to include user input or application state. This makes the tools interactive and responsive.

*Example from `getAiBiasAnalysis`*:
```typescript
const prompt = `
A user has just run an AI bias simulation...
- The user chose the "${datasetChoice}" dataset.
- The outcome was: "${outcome}"

Please provide an analysis...
`;
```

## üìú Digital Privacy Reference

This toolkit is built around several core digital rights concepts:

*   **End-to-End Encryption (E2EE)**: A secure communication method where only the communicating users can read the messages. The service provider cannot access the plaintext.
*   **Encryption Backdoors**: A deliberate flaw inserted into an encryption system to allow a third party (like the government) to bypass the security. Experts agree that a backdoor for "good guys" is inevitably a vulnerability for "bad guys."
*   **Client-Side Scanning (CSS)**: A technology where a user's private data (photos, messages) is scanned *on their own device* against a secret blocklist before being sent or stored. A match triggers a report to a central authority, effectively turning personal devices into tools of mass surveillance.
*   **Algorithmic Bias**: The tendency of AI systems to produce outcomes that unfairly prejudice certain groups. This often happens when the AI is trained on historical data that reflects existing societal biases.
*   **GDPR vs. US Privacy Law**: GDPR (Europe) treats data privacy as a fundamental human right, requiring explicit consent and data minimization. The US has a sector-specific approach (e.g., healthcare, finance) with state laws like the CCPA providing consumer rights, but lacks a comprehensive federal privacy law.
*   **First & Fourth Amendments**: These US constitutional pillars are central to digital privacy. The Fourth Amendment protects against unreasonable searches (which warrantless data collection can violate), and the First Amendment protects free speech, including the right to speak anonymously online.

## ü§ù Contributing

Contributions are welcome! Please feel free to submit a pull request or open an issue.

## üìÑ License

This project is licensed under the MIT License.
